From da2f5abb31911c633e64c75073b1ebad23fc8c6c Mon Sep 17 00:00:00 2001
From: Jos Dehaes <jos.dehaes@gmail.com>
Date: Wed, 16 Oct 2024 00:01:16 +0200
Subject: [PATCH] ucm2: add lenovo yoga slim 7x

---
 ucm2/Qualcomm/x1e80100/HiFi-yoga.conf         | 51 +++++++++++++++++++
 ucm2/Qualcomm/x1e80100/X1E80100LENOVOY.conf   | 18 +++++++
 ...NOVO-83ED-YogaSlim714Q8X9-LNVNB161216.conf |  1 +
 3 files changed, 70 insertions(+)
 create mode 100644 ucm2/Qualcomm/x1e80100/HiFi-yoga.conf
 create mode 100644 ucm2/Qualcomm/x1e80100/X1E80100LENOVOY.conf
 create mode 120000 ucm2/conf.d/x1e80100/LENOVO-83ED-YogaSlim714Q8X9-LNVNB161216.conf

diff --git a/ucm2/Qualcomm/x1e80100/HiFi-yoga.conf b/ucm2/Qualcomm/x1e80100/HiFi-yoga.conf
new file mode 100644
index 00000000..a2fe39a2
--- /dev/null
+++ b/ucm2/Qualcomm/x1e80100/HiFi-yoga.conf
@@ -0,0 +1,51 @@
+# Use case configuration for X1E80100.
+# Author: Krzysztof Kozlowski <krzysztof.kozlowski@linaro.org>
+
+SectionVerb {
+	EnableSequence [
+		cset "name='WSA_CODEC_DMA_RX_0 Audio Mixer MultiMedia1' 1"
+		cset "name='WSA_CODEC_DMA_RX_0 Audio Mixer MultiMedia2' 1"
+		cset "name='MultiMedia3 Mixer VA_CODEC_DMA_TX_0' 1"
+		cset "name='MultiMedia4 Mixer VA_CODEC_DMA_TX_0' 1"
+	]
+
+	Include.wsae.File "/codecs/wsa884x/four-speakers/DefaultEnableSeq.conf"
+	Include.wsm1e.File "/codecs/qcom-lpass/wsa-macro/Wsa1SpeakerEnableSeq.conf"
+	Include.wsm2e.File "/codecs/qcom-lpass/wsa-macro/Wsa2SpeakerEnableSeq.conf"
+
+	Value {
+		TQ "HiFi"
+	}
+}
+
+SectionDevice."Speaker" {
+	Comment "Speaker playback"
+
+	Include.wsmspk1e.File "/codecs/qcom-lpass/wsa-macro/Wsa1SpeakerEnableSeq.conf"
+	Include.wsmspk2e.File "/codecs/qcom-lpass/wsa-macro/Wsa2SpeakerEnableSeq.conf"
+	Include.wsmspk1d.File "/codecs/qcom-lpass/wsa-macro/Wsa1SpeakerDisableSeq.conf"
+	Include.wsmspk2d.File "/codecs/qcom-lpass/wsa-macro/Wsa2SpeakerDisableSeq.conf"
+	Include.wsaspk.File "/codecs/wsa884x/four-speakers/SpeakerSeq.conf"
+
+	Value {
+		PlaybackChannels 4
+		PlaybackPriority 100
+		PlaybackPCM "hw:${CardId},1"
+		PlaybackMixer "default:${CardId}"
+		PlaybackMixerElem "Speakers"
+	}
+}
+
+SectionDevice."Mic" {
+	Comment "Internal microphones"
+
+	Include.vadm0e.File "/codecs/qcom-lpass/va-macro/DMIC0EnableSeq.conf"
+	Include.vadm0d.File "/codecs/qcom-lpass/va-macro/DMIC0DisableSeq.conf"
+	Include.vadm1e.File "/codecs/qcom-lpass/va-macro/DMIC1EnableSeq.conf"
+	Include.vadm1d.File "/codecs/qcom-lpass/va-macro/DMIC1DisableSeq.conf"
+
+	Value {
+		CapturePriority 100
+		CapturePCM "hw:${CardId},3"
+	}
+}
diff --git a/ucm2/Qualcomm/x1e80100/X1E80100LENOVOY.conf b/ucm2/Qualcomm/x1e80100/X1E80100LENOVOY.conf
new file mode 100644
index 00000000..39da4e45
--- /dev/null
+++ b/ucm2/Qualcomm/x1e80100/X1E80100LENOVOY.conf
@@ -0,0 +1,18 @@
+Syntax 4
+
+SectionUseCase."HiFi" {
+	File "/Qualcomm/x1e80100/HiFi-yoga.conf"
+	Comment "HiFi quality Music."
+}
+
+BootSequence [
+	#cset "name='HPHL Volume' 20"
+	#cset "name='HPHR Volume' 20"
+	#cset "name='ADC2 Volume' 10"
+]
+
+Include.card-init.File "/lib/card-init.conf"
+Include.ctl-remap.File "/lib/ctl-remap.conf"
+Include.wsa-init.File "/codecs/wsa884x/four-speakers/init.conf"
+Include.wsam-init.File "/codecs/qcom-lpass/wsa-macro/four-speakers/init.conf"
+#Include.rxm-init.File "/codecs/qcom-lpass/rx-macro/init.conf"
diff --git a/ucm2/conf.d/x1e80100/LENOVO-83ED-YogaSlim714Q8X9-LNVNB161216.conf b/ucm2/conf.d/x1e80100/LENOVO-83ED-YogaSlim714Q8X9-LNVNB161216.conf
new file mode 120000
index 00000000..5660f8f2
--- /dev/null
+++ b/ucm2/conf.d/x1e80100/LENOVO-83ED-YogaSlim714Q8X9-LNVNB161216.conf
@@ -0,0 +1 @@
+../../Qualcomm/x1e80100/X1E80100LENOVOY.conf
\ No newline at end of file
